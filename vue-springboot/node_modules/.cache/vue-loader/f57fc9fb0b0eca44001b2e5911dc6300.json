{"remainingRequest":"C:\\Users\\izabe\\OneDrive\\Pulpit\\hybrydy\\crud book vue\\Hybrydowe_projekt1\\vue-springboot\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\izabe\\OneDrive\\Pulpit\\hybrydy\\crud book vue\\Hybrydowe_projekt1\\vue-springboot\\src\\components\\Register.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\izabe\\OneDrive\\Pulpit\\hybrydy\\crud book vue\\Hybrydowe_projekt1\\vue-springboot\\src\\components\\Register.vue","mtime":1591556200551},{"path":"C:\\Users\\izabe\\OneDrive\\Pulpit\\hybrydy\\crud book vue\\Hybrydowe_projekt1\\vue-springboot\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\izabe\\OneDrive\\Pulpit\\hybrydy\\crud book vue\\Hybrydowe_projekt1\\vue-springboot\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\izabe\\OneDrive\\Pulpit\\hybrydy\\crud book vue\\Hybrydowe_projekt1\\vue-springboot\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\izabe\\OneDrive\\Pulpit\\hybrydy\\crud book vue\\Hybrydowe_projekt1\\vue-springboot\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJSZWdpc3RlciIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vdXNlcnNMaXN0OiBbXSwNCiAgICAgIHVzZXI6ew0KICAgICAgICB1c2VybmFtZToiIiwNCiAgICAgICAgcGFzc3dvcmQ6IiINCiAgICAgIH0sDQogICAgICBlcnJvcnM6W10sDQogICAgICBjaGVja0FkbWluOmZhbHNlDQogICAgfTsNCiAgfSwNCiANCiAgIG1vdW50ZWQoKXsNCiAgICAgIGlmKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSl7DQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbiIpDQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWRVc2VyJykhPSIxIil7DQogICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvIikNCiAgICAgICAgfQ0KICAgICAgICANCiAgICB9LA0KICAgbWV0aG9kczp7DQogICAgYXN5bmMgUmVnaXN0ZXIoKXsNCiAgICAgICBjb25zdCBhdXRoPXsNCiAgICAgICAgICAgIGhlYWRlcnM6e0F1dGhvcml6YXRpb246IkJlYXJlciAiK2xvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpfX0NCiAgICAgICAgIGlmKHRoaXMuY2hlY2tBZG1pbj09ZmFsc2Upew0KICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2hlY2tBZG1pbik7DQogICAgICAgICAgICAgDQogICAgICAgICAgICAgIHRyeXsNCiAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoJ2h0dHBzOi8vaHlicnlka293ZWFwaS5henVyZXdlYnNpdGVzLm5ldC9yZWdpc3Rlcicsew0KICAgICAgICAgICAgICBsb2dpbjp0aGlzLnVzZXIudXNlcm5hbWUsDQogICAgICAgICAgICAgIHBhc3N3b3JkOnRoaXMudXNlci5wYXNzd29yZH0sIGF1dGgpOw0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi91c2VycyIpOw0KICAgICAgICAgICAgY29uc29sZS5sb2coInN1Y2NlcyIpOw0KICAgICAgICAgICB9DQogICAgICAgICAgIGNhdGNoKGUpew0KICAgICAgICAgICB0aGlzLmVycm9ycz1bXTsNCiAgICAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgiIikNCiAgICAgICAgICAgfQ0KDQogICAgICAgICAgfQ0KICAgICAgICAgIA0KICAgfSwNCiAgIGFzeW5jIEdlbmVyZXRlUHN3ZCgpew0KICAgICAgdHJ5ew0KICAgICAgICAgY29uc3QgYXV0aD17DQogICAgICAgICAgICBoZWFkZXJzOntBdXRob3JpemF0aW9uOiJCZWFyZXIgIitsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKX19DQogICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KCdodHRwczovL2h5YnJ5ZGtvd2VhcGkuYXp1cmV3ZWJzaXRlcy5uZXQvZ2VuZXJhdGVQYXNzd29yZCcsIGF1dGgpDQogICAgICAgICAgICAudGhlbihyZXN1bHQ9PnsNCiAgICAgICAgICAgICAgICB0aGlzLnVzZXIucGFzc3dvcmQ9cmVzdWx0LmRhdGE7DQogICAgICAgICAgICB9KTsNCiAgICAgIH1jYXRjaChlKXsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgfQ0KICAgfQ0KDQogICB9DQp9Ow0K"},{"version":3,"sources":["Register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Register.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\r\n<div >\r\n<h2>Add new user</h2>\r\n\r\n<form >\r\n   \r\n  <div class=\"form-group\">\r\n    <input type=\"text\" v-model=\"user.username\" placeholder=\"login\" required>\r\n    <br> <input type=\"text\" v-model=\"user.password\" placeholder=\"password\" required >\r\n   \r\n    <input type=\"submit\" @click=\"GeneretePswd()\" value=\"Generuj losowe hasło\">\r\n\r\n     <br><input type=\"submit\" @click=\"Register\"  value=\"Stwórz\">\r\n  </div>\r\n  <p v-if=\"errors.length\">\r\n    <a style=\"color:red\" v-for=\"error in errors\" :key=\"error\">{{ error }}</a>\r\n  </p>\r\n</form>\r\n\r\n</div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: \"Register\",\r\n  data() {\r\n    return {\r\n      //usersList: [],\r\n      user:{\r\n        username:\"\",\r\n        password:\"\"\r\n      },\r\n      errors:[],\r\n      checkAdmin:false\r\n    };\r\n  },\r\n \r\n   mounted(){\r\n      if(!localStorage.getItem('token')){\r\n          this.$router.push(\"/login\")\r\n        }\r\n        else if(localStorage.getItem('idUser')!=\"1\"){\r\n           this.$router.push(\"/\")\r\n        }\r\n        \r\n    },\r\n   methods:{\r\n    async Register(){\r\n       const auth={\r\n            headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}}\r\n         if(this.checkAdmin==false){\r\n             console.log(this.checkAdmin);\r\n             \r\n              try{\r\n               \r\n             await axios.post('https://hybrydkoweapi.azurewebsites.net/register',{\r\n              login:this.user.username,\r\n              password:this.user.password}, auth);\r\n            this.$router.push(\"/users\");\r\n            console.log(\"succes\");\r\n           }\r\n           catch(e){\r\n           this.errors=[];\r\n           this.errors.push(\"\")\r\n           }\r\n\r\n          }\r\n          \r\n   },\r\n   async GeneretePswd(){\r\n      try{\r\n         const auth={\r\n            headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}}\r\n            await axios.post('https://hybrydkoweapi.azurewebsites.net/generatePassword', auth)\r\n            .then(result=>{\r\n                this.user.password=result.data;\r\n            });\r\n      }catch(e){\r\n          console.log(e)\r\n      }\r\n   }\r\n\r\n   }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}